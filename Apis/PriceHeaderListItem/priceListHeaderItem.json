{
    
    "openapi": "3.0.1",
    
        "servers": [
    
          {
            "description": "API para cadastro tabela de preços dos produtos TOTVS",    
            "url": "api.totvs.com.br"
          }
    
        ], 
        
        "info": {
            "description": "API para manutenção de tabela de preço para os produtos TOTVS",
            "version":"2.004",
            "title":"PriceList",
            "contact":{
                "name":"T-Talk",
                "url": "api.totvs.com.br",
                "email":"comiteintegracao@totvs.com.br"
            },
            "x-totvs":{
                "messageDocumentation":{
                    "name":"PriceList",
                    "descriotion":"API para entidade Tabela de Preço para produtos TOTVS",
                    "segment":"Services"
                },
                "productInformation":{
                    "protheus":{
                        "contact":"squad.crm@totvs.com.br",
                        "description":"Cadastro de Tabela de Preço",
                        "adapter":"omsa010.prx"
                    }
                }
            }
        },
        "paths":{
            "/priceList":{
                "get":{
                    "tags":[
                        "priceListHeaderItem"
                    ],
                    "summary":"Retorna lista de Tabelas de Preço",
                    "x-totvs":{
                        "produtcInformation":{
                            "protheus":{
                                "avaliable":true,
                                "note":"Este verbo está disponível com todos os parâmetros",
                                "minimalVersion":"12.1.21"
                            }  
                        }
                    },
                    "description":"Retorna lista completa de vendedores",
                    "operationId":"getpricelistheaderitem",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/Order"
                        },
                        {
                            "$ref": "#/components/parameters/Page"
                        },
                        {
                            "$ref": "#/components/parameters/PageSize"
                        }
                    ],
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]
                },
                "post":{
                    "tags":[
                        "priceListHeaderItem"
                    ],
                    "summary":"Inclui uma Tabela de Preço",
                    "description":"Inclui uma tabela de preço conforme dados enviados na requisição.",
                    "operationId":"postpricelistId",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        }
                    ],
                    "requestBody":{
                        "description":"Tabela de preço a ser incluída.",
                        "content":{ 
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                }
                            }
                        }
                    },
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante inclusão da tabela de preço!",
                            "content":{
                                "application/json":{
                                    "schema":{

                                        "$ref":"#/components/schemas/ErrorDetails"

                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]
                }
            },
            "/priceList/{priceListId}":{
                "get":{
                    "tags":[
                     "priceListId"   
                    ],
                    "summary":"Retorna a tabela de preço de acordo com o seu código",
                    "operationId":"getpricelistId",
                    "x-totvs":{
                        "produtcInformation":{
                            "protheus":{
                                "avaliable":true,
                                "note":"Este verbo está disponível com os parâmetros Authorization e priceListId.",
                                "minimalVersion":"12.1.21"
                            }  
                        }
                    },
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        }
                    ],
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Vendedor não localizado na base!",
                            "content":{
                                "application/json":{
                                    "schema":{

                                        "$ref":"#/components/schemas/ErrorDetails"

                                    }
                                }
                            }
                        }      
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]
                },
                "put":{
                    "tags":[
                        "priceListId"
                    ],
                    "summary":"Altera o Cabeçalho da tabela de preço",
                    "description":"Atualiza o cadastro da tabela de preço conforme dados enviados na requisição",
                    "operationId":"putpricelistId",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        }                           
                    ],
                    "requestBody":{
                        "description":"Tabela de preço a ser atualizada.",
                        "content":{ 
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/PriceListHeaderInfo"
                                }
                            }
                        }
                    },
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeader"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante a alteração da tabela de preço!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/ErrorDetails"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]   
                },
                "delete":{
                    "tags":[
                        "priceListId"
                    ],
                    "summary":"Exclui uma tabela de preço",
                    "description":"Exclui a tabela de preço conforme dados enviados na requisição.",
                    "operationId":"deletepricelistId",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        }
                    ],
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante a exclusão da tabela de preço!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/ErrorDetails"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]   
                }
            },
            "/priceList/pricelistid/":{
                "post":{
                    "tags":[
                        "priceListItemId"
                    ],
                    "summary":"Inclui um item na Tabela de Preço",
                    "description":"Inclui um novo item na tabela de preço conforme dados enviados.",
                    "operationId":"postListItemId",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        }                        
                    ],
                    "requestBody":{
                        "description":"Tabela de preço a ser incluída.",
                        "content":{ 
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/PriceListItems"
                                }
                            }
                        }
                    },
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante inclusão da tabela de preço!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/ErrorDetails"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]
                }
            },
            "/priceList/{priceListId}/pricelistid/{itemCode}":{
                "put":{
                    "tags":[
                        "priceListItemCode"
                    ],
                    "summary":"Altera um item da tabela de preço",
                    "description":"Atualiza um item da tabela de preço conforme dados enviados na requisição",
                    "operationId":"priceListItemCode",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        },
                        {
                            "$ref": "#/components/parameters/itemCode"
                        }                            
                    ],
                    "requestBody":{
                        "description":"Tabela de preço a ser atualizada.",
                        "content":{ 
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/PriceListItemInfo"
                                }
                            }
                        }
                    },
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante a alteração da tabela de preço!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/ErrorDetails"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]   
                },
                "delete":{
                    "tags":[
                        "priceListItemCode"
                    ],
                    "summary":"Exclui um item da tabela de preço",
                    "description":"Exclui um item da tabela de preço conforme dados enviados na requisição.",
                    "operationId":"deletepriceListItemCode",
                    "parameters":[
                        {
                            "$ref": "#/components/parameters/Authorization"
                        },
                        {
                            "$ref": "#/components/parameters/priceListId"
                        },
                        {
                            "$ref": "#/components/parameters/itemCode"
                        }                            
                    ],
                    "responses":{
                        "200":{
                            "description":"Operação realizada com sucesso!",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/PagedPriceListHeaderItems"
                                    }
                                }
                            }
                        },
                        "400":{
                            "description":"Erro durante a exclusão da tabela de preço! ",
                            "content":{
                                "application/json":{
                                    "schema":{
                                        "$ref":"#/components/schemas/ErrorDetails"
                                    }
                                }
                            }
                        }
                    },
                    "security":[
                        {
                            "api_key":[]
                        }
                    ]   
                }                
            }    
        },
        "components":{
            "parameters":{
                "priceListId":{
                    "name":"priceListId",
                    "in":"path",
                    "required":true,
                    "description":"Identificador único da tabela de preço",
                    "schema":{
                        "type": "string"
                    }
                },
                "itemCode":{
                    "name":"itemCode",
                    "in":"path",
                    "required":true,
                    "description":"Identificador do item da tabela de preço",
                    "schema":{
                        "type": "string"
                    }
                },                
                "Authorization":{
                    "name":"authorization",
                    "in":"header",
                    "required":true,
                    "description":"Cabeçalho usado para autorização das resquisições.",
                    "schema":{
                        "type": "string"
                    }
                },
                "Order":{
                    "name":"order",
                    "in":"query",
                    "description":"Ordenação da coleção",
                    "required":false,
                    "schema":{
                        "type":"array",
                        "items":{
                            "type":"string"
                        },
                        "uniqueItems":true
                    }
                },
                "Page":{
                    "name":"page",
                    "in":"query",
                    "description":"Paginação da coleção",
                    "required":false,
                    "schema":{
                        "type":"integer",
                        "format":"int32",
                        "default":1,
                        "minimum":1,
                        "exclusiveMinimum":false
                    }
                },
                "PageSize":{
                    "name":"pageSize",
                    "in":"query",
                    "description":"Quantidade de itens por página",
                    "required":false,
                    "schema":{
                        "type":"integer",
                        "format":"int32",
                        "default":20
                    } 
                }                                                
            },
            "schemas":{
                "PagedPriceListHeaderItems":{
                    "type":"object",
                    "allOf":[
                        {
                            "$ref":"#/components/schemas/Paging"
                        },
                        {
                            "$ref":"#/components/schemas/PriceListHeaders"
                        },
                        {
                            "$ref":"#/components/schemas/PriceListItems"                            
                        }
                    ]
                },
                "PagedPriceListHeader":{
                    "type":"object",
                    "allOf":[
                        {
                            "$ref":"#/components/schemas/Paging"
                        },
                        {
                            "$ref":"#/components/schemas/PriceListHeaders"
                        }
                    ]
                },                
                "PriceListHeaders":{
                    "type":"object",
                    "properties":{
                        "items":{
                            "type":"array",
                            "items":{
                                "$ref":"#/components/schemas/PriceListHeaderInfo"
                            }
                        }
                    }
                },
                "PriceListHeaderInfo":{
                    "type":"object",
                    "properties":{
                        "priceListId":{
                            "type":"string",
                            "description":"Código da tabela de preço",
                            "x-totvs":{
                                "protheus":{
                                    "field":"DA0.DA0_CODTAB",
                                    "required":true,
                                    "type":"varchar",
                                    "length":"6",
                                    "available":true
                                }
                            }
                        },
                        "priceHeaderItemInternalId":{
                            "type":"string",
                            "description":"InternalId da chave completa da tabela de preço",
                            "x-tovs":{
                                "protheus":{
                                    "note":"InternalID da tabela de preço utilizado na integração EAI-TOTVS formado por EMPRESA|DA0_FILIAL|DA0_CODTAB"
                                }
                            }
                        },
                        "companyId":{
                            "type":"string",
                            "description":"Código da empresa",
                            "x-totvs":{
                                "protheus":{
                                    "required":false,
                                    "type":"varchar",
                                    "length":"4",
                                    "note":"pode ter tamanho variável até 4 com Gestão de Empresa ativado"
                                }
                            }
                        },
                        "name":{
                            "type":"string",
                            "description":"Descrição da Tabela",
                            "maxLength":40,
                            "x-totvs":{
                                "protheus":{
                                    "field":"DA0.DA0_DESCRI",
                                    "note":"Descrição",
                                    "length":"30"
                                },
                                "datasul":{
                                    "length":"40"
                                }
                            }
                        },
                        "initialDate":{
                            "type":"string",
                            "format":"date",
                            "example":"2018-07-19",
                            "description":"Data Inicial da Vigência AAAA-MM-DD",
                            "maxLength":10,
                            "x-totvs":{
                                "field":"DA0.DA0_DATDE",
                                "description":"Data Inicial"
                            }
                        },
                        "finalDate":{
                            "type":"string",
                            "format":"date",
                            "example":"2018-07-19",
                            "description":"Data Final da Vigência AAAA-MM-DD",
                            "maxLength":10,
                            "x-totvs":{
                                "field":"DA0.DA0_DATATE",
                                "description":"Data Final"
                            }
                        }, 
                        "initiaHour":{
                            "type":"string",
                            "format":"date-time",
                            "description":"Hora Inicial Vigencia HH:MM:SS",
                            "x-totvs":{
                                "field":"DA0.DA0_HORADE",
                                "description":"Hora Inicial"
                            }
                        },
                        "finalHour":{
                            "type":"string",
                            "format":"date-time",
                            "description":"Hora Final Vigencia HH:MM:SS",
                            "x-totvs":{
                                "field":"DA0.DA0_HORATE",
                                "description":"Hora Final"
                            }
                        },
                        "valueDescount":{
                            "type":"number",
                            "format":"double",
                            "description":"Desconto Tabela de Preço",
                            "maxLength":12
                        },
                        "activeTablePrice":{
                            "type":"string",
                            "description":"Tabela de Preco Ativo? 1 = Sim; 2 = Nao",
                            "x-totvs":{
                                "protheus":{
                                    "field":"DA0.DA0_ATIVO",
                                    "decription":"Tabela Ativa",
                                    "type":"varchar",
                                    "enum":[
                                        "1 = Sim; 2 = Nao"
                                    ],
                                    "length":"1"
                                }
                            }
                        }
                    }
                },
                "PriceListItems":{
                    "type":"object",
                    "properties":{
                        "items":{
                            "type":"array",
                            "items":{
                                "$ref":"#/components/schemas/PriceListItemInfo"
                            }
                        }
                    }
                },                
                "PriceListItemInfo":{
                    "type":"object",
                    "properties":{
                        "priceListId":{
                            "type":"string",
                            "description":"Código da tabela de preço",
                            "x-totvs":{
                                "protheus":{
                                    "field":"DA1.DA1_CODTAB",
                                    "required":true,
                                    "type":"varchar",
                                    "length":"6",
                                    "available":true
                                }
                            }
                        },                                
                        "itemCode":{
                            "type":"string",
                            "description":"Código do Produto",
                            "maxLength":30,
                            "x-totvs":{
                                "type":"varchar",
                                "field":"",
                                "description":"",
                                "length":""
                                }
                        },
                        "itemInternalId":{
                            "type":"string",
                            "description":"InternalId da chave completa do Item",
                            "x-totvs":{
                                "protheus":{
                                    "required":true,
                                    "type":"varchar",
                                    "length":"50",
                                    "note":"InternalID do produto formado por EMPRESA|B1_FILIAL|B1_COD"
                                }
                            }
                        },
                        "referenceCode":{
                            "type":"string",
                            "description":"Código da Referência do Produto",
                            "maxLength":8,
                            "x-totvs":{
                                "datasul":{
                                    "field":"cod-refer",
                                    "required":true,
                                    "type":"string",
                                    "length":"8"
                                }
                            }
                        },
                        "UnitOfMeasureCode":{
                            "type":"string",
                            "description":"Código da Unidade de Medida de Venda",
                            "maxLength":2,
                            "x-totvs":{
                                "datasul":{
                                    "field":"cod-unid-med",
                                    "required":true,
                                    "type":"string",
                                    "length":"2"
                                }
                            }                                            
                        },
                        "minimumSalesPrice":{
                            "type":"number",
                            "format":"double",
                            "description":"Preco mínimo de venda do produto - Valor Sem Frete",
                            "maxLength":12
                        },
                        "minimumSalesPriceFOB":{
                            "type":"number",
                            "format":"double",
                            "description":"Preco de minimo de venda do produto - FOB",
                            "maxLength":12
                        },
                        "discountValue":{
                            "type":"number",
                            "format":"double",
                            "description":"Valor de Desconto em reais",
                            "maxLength":12,
                            "x-totvs":{
                                "field":"DA1.DA1_VLRDES",
                                "length":"9",
                                "description":"Vlr.Desconto",
                                "note":"Campo com duas casas decimais"
                            }
                        },
                        "discountFactor":{
                            "type":"number",
                            "format":"double",
                            "description":"Fator de Acresc./Desconto%",
                            "maxLength":11,
                            "x-totvs":{
                                "field":"DA1.DA1_FRETE",
                                "length":"6",
                                "description":"Fator",
                                "note":"Campo com quatro casas decimais"
                            }                            
                        },
                        "minimumAmount":{
                            "type":"number",
                            "format":"double",
                            "description":"Quantidade Mínima",
                            "maxLength":11
                        },                                                                                                                                                                                                          
                        "cifPrice":{
                            "type":"number",
                            "format":"double",
                            "description":"Preco CIF",
                            "maxLength":11
                        },                                        
                        "fifPrice":{
                            "type":"number",
                            "format":"double",
                            "description":"Preco FOB",
                            "maxLength":11
                        },                                                                                
                        "itemValidity":{
                            "type":"string",
                            "format":"date",
                            "example":"2018-07-19",
                            "description":"Data Vigência do item AAAA-MM-DD",
                            "maxLength":10
                        },
                        "typePrice":{
                            "type":"string",
                            "description":"Tipo da Tabela de Preço: Preço Venda, Venda Consumidor, Atacado , Varejo, Promoção",
                            "maxLength":1,
                            "x-totvs":{
                                "field":"DA1.DA1_TIPPRE",
                                "description":"Tipo Preço",
                                "note":"Tipo da Tabela de Preço: Preco Venda, Venda Consumidor, Atacado , Varejo, Promoção"
                            }
                        },
                        "activeItemPrice":{
                            "type":"string",
                            "description":"Status do Item da Tabela de Preço: 1 = Sim; 2 = Não",
                            "maxLength":1,
                            "x-totvs":{
                                "protheus":{
                                    "field":"DA1_ATIVO",
                                    "discription":"Ativo",
                                    "type":"varchar",
                                    "required":false,
                                    "length":1,
                                    "description":"",
                                    "note":"1 = Sim; 2 = Nao",
                                    "enum":[
                                        "1 = Sim; 2 = Nao"
                                    ]
                                }
                            }
                        } 
                    }
                },                
                "Paging":{
                    "type":"object",
                    "properties":{
                        "hasNext":{
                            "type":"boolean",
                            "example":false
                        }
                    }
                },
                "ErrorDetails":{
                    "type":"object",
                    "allOf":[
                        {
                            "$ref":"#/components/schemas/ErrorModel" 
                        },
                        {
                            "$ref":"#/components/schemas/ErrorDetail" 
                        }
                    ]
                },
                "ErrorModel":{
                    "type":"object",
                    "required":[
                        "code",
                        "message",
                        "detailedMessage"
                    ],
                    "properties":{
                        "code":{
                            "type":"string",
                            "description":"Código identificador do erro."
                        },
                        "message":{
                            "type":"string",
                            "description":"Literal no idioma da requisição descrevendo o erro para o usuário."
                        },
                        "detailedMessage":{
                            "type":"string",
                            "format":"uri",
                            "description":"Mensagem técnica e mais detalhada do erro."
                        },
                        "helpUrl":{
                            "type":"string",
                            "format":"uri",
                            "description":"URI para documentação do erro."
                        }
                    }
    
                },
                "ErrorDetail":{
                    "type":"object",
                    "properties":{
                        "details":{
                            "type":"array",
                            "items":{
                                "$ref":"#/components/schemas/ErrorModel"   
                            }
                        }
                    }
                }
            }
        }

}